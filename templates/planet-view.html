<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Planet Info</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<style>
body { 
    margin: 0;  
    background: radial-gradient(circle at 20% 20%, #0f2027, #203a43, #2c5364);
    font-family: 'Space Grotesk', sans-serif;
    overflow: hidden;
    color: #ffd700;
    display: flex;
    flex-direction: row;
    height: 100vh;
}

#planet-container {
    flex: 1;
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
}

#profile-container {
    flex: 1;
    padding: 2rem;
    overflow-y: auto;
    background: rgba(0,0,0,0.3);
    display: flex;
    flex-direction: column;
    justify-content: center;
}

h2 {
    color: #ffd700;
    margin-bottom: 1rem;
    text-shadow: 0 0 8px rgba(255,215,0,0.6);
}

.profile-section {
    margin-bottom: 1rem;
    text-align: justify;
}

.profile-section span.label {
    font-weight: 600;
    color: #fff;
    display: inline-block;
    width: 140px;
}

.profile-section span.value {
    color: #ffd700;
    font-weight: 500;
}

.planet-color {
    display: inline-block;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    margin-left: 5px;
    border: 1px solid #fff;
}

footer {
    position: absolute;
    bottom: 10px;
    width: 100%;
    text-align: center;
    color: rgba(255,255,255,0.6);
}

@media(max-width: 992px) {
    body {
        flex-direction: column;
    }
    #planet-container, #profile-container {
        flex: unset;
        width: 100%;
        height: 50%;
    }
}
</style>
</head>
<body>

<div id="planet-container"></div>

<div id="profile-container">
    <h2>Planet Info:</h2>
    <div class="profile-section">
        <span class="label">Temperature:</span>
        <span class="value" id="planet-temp"></span>
    </div>
    <div class="profile-section" style="display: flex; align-items: center;">
        <span class="label">HEX Color:</span>
        <span class="value" id="planet-hex"></span>
        <span class="planet-color" id="planet-color"></span>
    </div>
    <div class="profile-section">
        <span class="label">Characteristics:</span>
        <span class="value" id="planet-characteristics"></span>
    </div>
    <div class="profile-section">
        <span class="label">Planet Type:</span>
        <span class="value" id="planet-type"></span>
    </div>
    <div class="profile-section">
        <span class="label">Habitability:</span>
        <span class="value" id="planet-habitability"></span>
    </div>
</div>

<footer>&copy; 2025 ExoLens. All rights reserved.</footer>

<script>
// ===== Read temperature from URL =====
const urlParams = new URLSearchParams(window.location.search);
const planetTemp = parseFloat(urlParams.get('temp')) || 270;

document.getElementById('planet-temp').textContent = `${planetTemp} K`;

const planetData = [
    {range: [0,150], color:"#AEE3F7", desc:"Frozen surface, thick ice crust, possible subsurface oceans", type:"Ice world, frozen moon", habit:"❌ Not habitable (but possible subsurface life)"},
    {range: [150,250], color:"#BFD3E6", desc:"Cold, thin atmosphere, CO₂ frost, seasonal melting", type:"Mars-like cold desert", habit:"⚠️ Marginal (greenhouse effect needed)"},
    {range: [250,320], color:"#86C5DA", desc:"Mild climate, oceans, clouds, diverse terrain", type:"Earth-like, temperate super-Earth", habit:"✅ Potentially habitable for Earth-like life"},
    {range: [320,500], color:"#F2A65A", desc:"Hot deserts, thick dry atmosphere, minimal water", type:"Venus-like, hot terrestrial", habit:"❌ Too hot for Earth-like life"},
    {range: [500,800], color:"#FF7F24", desc:"Lava flows, volcanic gases, molten rock", type:"Lava world, hot super-Earth", habit:"❌ Not habitable"},
    {range: [800,1500], color:"#E63946", desc:"Molten crust, metal vapor clouds, unstable surface", type:"Ultra-hot rocky planet", habit:"❌ Inhospitable"},
    {range: [1500,2500], color:"#C51605", desc:"Partially vaporized surface, stripped atmosphere", type:"Extreme lava world", habit:"❌ Not suitable for life"},
    {range: [2500,4000], color:"#F7E65C", desc:"Rock vapor atmosphere, extreme radiation, unstable structure", type:"Evaporating rocky planet, irradiated gas giant", habit:"❌ Impossible for known life"},
    {range: [4000,10000], color:"#FAF9F6", desc:"Plasma conditions, molecular dissociation, hotter than stars", type:"Ultra-hot Jupiter (e.g., KELT-9b)", habit:"❌ Absolutely uninhabitable"},
];

let info = planetData.find(p => planetTemp >= p.range[0] && planetTemp < p.range[1]);

document.getElementById('planet-hex').textContent = info.color;
document.getElementById('planet-characteristics').textContent = info.desc;
document.getElementById('planet-type').textContent = info.type;
document.getElementById('planet-habitability').textContent = info.habit;
document.getElementById('planet-color').style.backgroundColor = info.color;

// ===== Three.js Planet =====
let scene, camera, renderer, planetGroup, planetMesh;
let targetRotationX = 0, targetRotationY = 0;
let isMouseInteracting = false;
let autoRotationSpeed = 0.004;
let scaleDirection = 1;

function init() {
    scene = new THREE.Scene();
    camera = new THREE.PerspectiveCamera(75, window.innerWidth/2/window.innerHeight, 0.1, 1000);
    camera.position.z = 20;

    renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setSize(window.innerWidth/2, window.innerHeight);
    document.getElementById('planet-container').appendChild(renderer.domElement);

    planetGroup = new THREE.Group();
    scene.add(planetGroup);

    const ambient = new THREE.AmbientLight(0xffffff, 0.4);
    const directional = new THREE.DirectionalLight(0xffffff, 1.2);
    directional.position.set(15,10,10);
    scene.add(ambient, directional);

    const geometry = new THREE.SphereGeometry(9, 128, 128);
    const material = new THREE.MeshStandardMaterial({ 
        color: parseInt(info.color.replace("#","0x")), 
        emissive: 0x111111, roughness:0.5, metalness:0.2
    });
    planetMesh = new THREE.Mesh(geometry, material);
    planetGroup.add(planetMesh);

    const glowMaterial = new THREE.MeshBasicMaterial({ color: parseInt(info.color.replace("#","0x")), transparent:true, opacity:0.2 });
    const glowMesh = new THREE.Mesh(new THREE.SphereGeometry(9.5,128,128), glowMaterial);
    planetGroup.add(glowMesh);

    document.addEventListener('mousemove', e => {
        const mouseX = (e.clientX / (window.innerWidth/2)) * 2 - 1;
        const mouseY = -(e.clientY / window.innerHeight) * 2 + 1;
        targetRotationY = mouseX * Math.PI;
        targetRotationX = mouseY * Math.PI * 0.5;
        isMouseInteracting = true;
    });

    animate();
}

function animate() {
    requestAnimationFrame(animate);
    if(!isMouseInteracting) targetRotationY += autoRotationSpeed;
    planetGroup.rotation.y += (targetRotationY - planetGroup.rotation.y) * 0.05;
    planetGroup.rotation.x += (targetRotationX - planetGroup.rotation.x) * 0.05;

    planetMesh.scale.x += 0.0008 * scaleDirection;
    planetMesh.scale.y += 0.0008 * scaleDirection;
    planetMesh.scale.z += 0.0008 * scaleDirection;
    if(planetMesh.scale.x > 1.05 || planetMesh.scale.x < 0.95) scaleDirection *= -1;

    renderer.render(scene, camera);
}

window.addEventListener('resize', ()=>{
    camera.aspect = window.innerWidth/2/window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth/2, window.innerHeight);
});

init();
</script>

</body>
</html>
